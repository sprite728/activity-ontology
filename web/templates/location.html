{% extends "index.html" %}

{% block content %}

<div class="jumbotron">
    <p class="lead">For the following location, please input a predicate-object pair representing an activity that can be done at that location.</p>
</div>

<hr>

<!-- Submission form -->   
<form id="submit-form" action="{{ turkSubmitTo }}" method="GET" class="questions">
    {% if location == 'atm' %}
    <h2 class="questions-heading">{{ location|upper }}</h2>
    {% elif location == 'rv_park' %}
    <h2 class="questions-heading">RV park</h2>
    {% else %}
    <h2 class="questions-heading">{{ location|replace("_", " ")|capitalize }}</h2>
    {% endif %}
    <p class="lead">{{ description }}</p>
    <div class="submit_form">
        <input id="predicate" name="predicate" type="text" class="predicate" placeholder="Predicate" required>
        <input id="object" name="object" type="text" class="object" placeholder="Object" required>
        <input id="location" name="location" type="hidden" value="{{ location }}">
        <input id="hitId" name="hitId" type="hidden" value="{{ hitId }}">
        <input id="assignmentId" name="assignmentId" type="hidden" value="{{ assignmentId }}">
        <input id="workerId" name="workerId" type="hidden" value="{{ workerId }}">
        <input class="btn btn-large btn-primary" type="submit" value="Commit">
    </div>
</form>

{% endblock %}

{% block js %}
<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="{{ url_for('static', filename='js/jquery.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-transition.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-alert.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-dropdown.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-scrollspy.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-tab.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-tooltip.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-popover.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-button.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-collapse.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-carousel.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-typeahead.js') }}"></script>
<script src="{{ url_for('static', filename='js/binary-search.js') }}"></script>

<script type="text/javascript">
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
</script>

<script type="text/javascript">
{% if assignmentId == 'ASSIGNMENT_ID_NOT_AVAILABLE' %}
    $("input").attr("disabled", "true");
{% endif %}

// Uncomment this if deemed necessary for IE browsers

// $('#submit-form').submit(function() {
//     var emptyPred = $('#predicate').val().length === 0;
//     var emptyObj = $('#object').val().length === 0;

//     var isFormValid = !emptyObj && !emptyPred;

//     if (!isFormValid) {
//         alert("Please fill in all the required fields.");
//     }

//     return isFormValid;
// });
</script>

<script type="text/javascript">
var predicates = [];
var objects = [];

// Load predicates from a static file.
$(function() {
    $.getJSON("{{ url_for('static', filename='data/predicates.json') }}", function(data) {
        $.each(data, function(key, val) {
            predicates.push(val);
        });
    });
});
</script>
<script src="{{ url_for('static', filename='js/fetch-objects.js') }}"></script>
<script src="{{ url_for('static', filename='js/autocomplete.js') }}"></script>

{% endblock %}